# Google Drive Upload Setup Guide

## Prerequisites

1. **Install Google Drive API dependencies:**
   ```bash
   pip install -r requirements_gdrive.txt
   ```

2. **Set up Google Drive API credentials:**
   - Go to [Google Cloud Console](https://console.cloud.google.com/)
   - Create a new project or select existing one
   - Enable the Google Drive API
   - Create credentials (OAuth 2.0 client ID) for a desktop application
   - Download the credentials JSON file

## Usage

### 1. Run TRIDENT Segmentation First
```bash
python THESIS_PANK/run_trident_segmentation.py \
    --image_dir ./pdac5_slides \
    --trident_output_dir ./trident_output \
    --trident_script_path ./TRIDENT/run_batch_of_slides.py \
    --gpu 0
```

### 2. Upload Thumbnails to Google Drive
```bash
python THESIS_PANK/upload_thumbnails_to_drive.py \
    --trident_output_dir ./trident_output \
    --credentials_file /path/to/your/credentials.json \
    --folder_name "PDAC5_QC_Thumbnails"
```

## What the Script Does

1. **Finds visualization files** generated by TRIDENT in:
   - `*/visualization/*.jpg` directories
   - Any `.jpg`, `.jpeg`, `.png` files in output directories

2. **Creates a Google Drive folder** for quality control

3. **Uploads all thumbnails** to the specified folder

4. **Provides folder ID** for easy access

## Authentication

- On first run, the script will open a browser window for authentication
- After authentication, a `token.json` file is saved for future use
- No need to re-authenticate unless token expires

## Quality Control Workflow

1. Run TRIDENT segmentation on your slides
2. Upload thumbnails to Google Drive
3. Review segmentation quality in the browser
4. Note any slides that need re-processing
5. Proceed with the pipeline for good slides

## Troubleshooting

- **Authentication errors**: Delete `token.json` and re-authenticate
- **No files found**: Check TRIDENT output structure and file paths
- **Upload failures**: Check internet connection and file permissions 